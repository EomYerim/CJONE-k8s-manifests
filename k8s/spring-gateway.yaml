# spring-gateway.yaml

apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: spring-app-gateway # ì•±ì„ ìœ„í•œ ìƒˆë¡œìš´ Gateway ì´ë¦„
  namespace: default      # default ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìƒì„±
spec:
  selector:
    istio: ingressgateway # ì´ ë¶€ë¶„ì€ istio-ingressgateway íŒŒë“œë¥¼ ê°€ë¦¬í‚´
  servers:
    - port:
        number: 80
        name: http
        protocol: HTTP
      hosts:
        - "*" # ëª¨ë“  í˜¸ìŠ¤íŠ¸ ìš”ì²­ì„ ë°›ìŒ
---
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: spring-app
  namespace: default
spec:
  hosts:
    - "*"
  gateways:
    - spring-app-gateway # ğŸ’¡ ë°©ê¸ˆ ìœ„ì—ì„œ ë§Œë“  ìƒˆë¡œìš´ Gateway ì´ë¦„ ì§€ì •
  http:
    - route:
        - destination:
            host: spring-app # spring-app Serviceë¡œ íŠ¸ë˜í”½ì„ ë³´ëƒ…ë‹ˆë‹¤.
            port:
              number: 8080 # spring-app Serviceì˜ í¬íŠ¸